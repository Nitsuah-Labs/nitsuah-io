#!/bin/sh
# Add Node.js to PATH for Git Bash on Windows
export PATH="/c/Program Files/nodejs:$PATH"

echo "üîç Running pre-commit validation (fast checks only)..."

# Fast checks only - accessibility tests moved to pre-push
echo "1/3 Checking types..."
npm run typecheck || exit 1

echo "2/3 Auto-formatting staged files..."
npx lint-staged || {
	echo "npx lint-staged failed or unavailable; falling back to project formatter..."
	npm run format || exit 1
	git add -A
}

echo "3/3 Running Jest tests..."
npm test || exit 1

echo "‚úÖ All pre-commit checks passed! (accessibility tests will run on push)"


